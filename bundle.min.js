function rectangle(){return{perimeter:function(e,a){return 2*(Number(e)+Number(a))},area:function(e,a){return Number(e)*Number(a)}}}function valid(e){var a={isOK:!1,reason:""};return""===e?a.reason="不能为空":Number(e)<0?a.reason="不能为负":/^-?(0|[1-9]\d*)(\.\d*)?([eE][+-]?\d+)?$/.test(e)?a.isOK=!0:a.reason="必须是数值",a}$(function(){var l=$("#width"),n=$("#height"),e=$("#calculate"),v=$("#perimeter"),o=$("#width-validation"),u=$("#height-validation"),s=$("#area");l.focusout(function(){var e=valid(l.val());e.isOK?o.html(""):(o.html("宽度"+e.reason),l.select())}),n.focusout(function(){var e=valid(n.val());e.isOK?u.html(""):(u.html("高度"+e.reason),n.select())}),e.click(function(){var e=l.val(),a=n.val(),r=valid(e),t=valid(a);if(!r.isOK)return o.html("宽度"+r.reason),void l.select();if(!t.isOK)return u.html("高度"+t.reason),void n.select();o.html(""),u.html("");var i=rectangle();v.val(i.perimeter(l.val(),n.val())),s.val(i.area(l.val(),n.val()))})});